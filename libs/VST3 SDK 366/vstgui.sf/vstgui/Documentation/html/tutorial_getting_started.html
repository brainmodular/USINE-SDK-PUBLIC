<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>VSTGUI: Getting Started Tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxydocu.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">VSTGUI
   &#160;<span id="projectnumber">3.6</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Getting Started Tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This tutorial should give you a brief overview on how to get started using <a class="el" href="namespace_v_s_t_g_u_i.html">VSTGUI</a>.</p>
<ul>
<li><a class="el" href="tutorial.html#vstintegration">VST Integration</a> <br />
</li>
<li><a class="el" href="tutorial.html#addingviewsandcontrols">Adding views and controls</a> <br />
</li>
<li><a class="el" href="tutorial_getting_started.html#controllistener">Getting notification of control changes</a> <br />
 </li>
</ul>
<h1><a class="anchor" id="vstintegration"></a>
VST Integration</h1>
<p>To add a user interface to a VST Plug-In with <a class="el" href="namespace_v_s_t_g_u_i.html">VSTGUI</a> is quiet simple.</p>
<p>Create a new class which inherits from AEffGUIEditor. Overwrite AEffGUIEditor::open and AEffGUIEditor::close. </p><div class="fragment"><div class="line"><span class="keyword">class </span>MyEditor : <span class="keyword">public</span> AEffGUIEditor</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">        MyEditor (<span class="keywordtype">void</span>* ptr) : AEffGUIEditor (ptr) {}</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">bool</span> open (<span class="keywordtype">void</span>* ptr);</div>
<div class="line">        <span class="keywordtype">void</span> close ();</div>
<div class="line">};</div>
</div><!-- fragment --><p>In MyEditor::open you create the CFrame. </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> MyEditor::open (<span class="keywordtype">void</span>* ptr)</div>
<div class="line">{</div>
<div class="line">        CRect frameSize (0, 0, 300, 300);</div>
<div class="line">        frame = <span class="keyword">new</span> CFrame (frameSize, ptr, <span class="keyword">this</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><p>In MyEditor::close you need to delete the CFrame </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> MyEditor::close ()</div>
<div class="line">{</div>
<div class="line">        <span class="keyword">delete</span> frame;</div>
<div class="line">        frame = 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Now you just need to set the editor of your VST Plug-In to a new instance of MyEditor. </p><div class="fragment"><div class="line"><span class="comment">// somewhere in the constructor of your VST Plug-In</span></div>
<div class="line">setEditor (<span class="keyword">new</span> MyEditor (<span class="keyword">this</span>));</div>
</div><!-- fragment --><p>So you have your own editor for a VST Plug-In. Now you need to add controls to it.</p>
<h1><a class="anchor" id="addingviewsandcontrols"></a>
Adding views and controls</h1>
<ul>
<li><a class="el" href="tutorial_getting_started.html#loading_bitmaps">Loading images</a> <br />
</li>
<li><a class="el" href="tutorial_getting_started.html#adding_views">Creating views and adding them to the frame</a> <br />
</li>
<li><a class="el" href="tutorial_getting_started.html#adding_knob">Creating a knob control</a> <br />
</li>
</ul>
<h2><a class="anchor" id="loading_bitmaps"></a>
Loading images</h2>
<p>Most controls provided with <a class="el" href="namespace_v_s_t_g_u_i.html">VSTGUI</a> use images. So you need to know how to load and use images in <a class="el" href="namespace_v_s_t_g_u_i.html">VSTGUI</a>. To load an image, you just need to use the CBitmap class. </p><div class="fragment"><div class="line">CBitmap* bitmap = <span class="keyword">new</span> CBitmap (<span class="stringliteral">&quot;MyBitmap.png&quot;</span>);</div>
</div><!-- fragment --><p> The image "MyBitmap.png" must be defined in the .rc file on Windows like this : </p><div class="fragment"><div class="line">MyBitmap.png        DATA  DISCARDABLE     <span class="stringliteral">&quot;MyBitmap.png&quot;</span></div>
</div><!-- fragment --><p> On Mac OS X the image must be inside the Resources folder of the vst bundle. </p>
<h2><a class="anchor" id="adding_views"></a>
Creating views and adding them to the frame</h2>
<p>Now that we have loaded an image, we want this image to be shown in our editor. The simplest way is to use the CView class, which is the base of all view and control classes. </p><div class="fragment"><div class="line">CView* myView = <span class="keyword">new</span> CView (CRect (0, 0, bitmap-&gt;getWidth (), bitmap-&gt;getHeight ()));</div>
<div class="line">myView-&gt;setBackground (bitmap);</div>
</div><!-- fragment --><p> To actually get this shown, we need to add this view to the CFrame object created earlier. </p><div class="fragment"><div class="line">frame-&gt;addView (myView);</div>
</div><!-- fragment --><p> So after we have setup all views we can get rid of our image as all views will remember the image by its own. </p><div class="fragment"><div class="line">bitmap-&gt;forget ();</div>
</div><!-- fragment --><p> Now lets see how this looks as a complete example : </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> MyEditor::open (<span class="keywordtype">void</span>* ptr)</div>
<div class="line">{</div>
<div class="line">        CRect frameSize (0, 0, 300, 300);</div>
<div class="line">        frame = <span class="keyword">new</span> CFrame (frameSize, ptr, <span class="keyword">this</span>);</div>
<div class="line">        CBitmap* bitmap = <span class="keyword">new</span> CBitmap (<span class="stringliteral">&quot;MyBitmap.png&quot;</span>);</div>
<div class="line">        CView* myView = <span class="keyword">new</span> CView (CRect (0, 0, bitmap-&gt;getWidth (), bitmap-&gt;getHeight ()));</div>
<div class="line">        myView-&gt;setBackground (bitmap);</div>
<div class="line">        frame-&gt;addView (myView);</div>
<div class="line">        bitmap-&gt;forget ();</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><p>To only have an image shown in our editor is a little bit lame. We want to have some controls the user can interact with.</p>
<h2><a class="anchor" id="adding_knob"></a>
Creating a knob control</h2>
<p><a class="el" href="namespace_v_s_t_g_u_i.html">VSTGUI</a> provides some basic controls you can use. As an example we use the CKnob control. The CKnob control takes two images, the background and the handle. The background as its name suggest is always drawn as the background of this control, while the handle is drawn at the position of the value of this control. See <a class="el" href="class_v_s_t_g_u_i_1_1_c_knob.html" title="a knob control ">VSTGUI::CKnob</a> for more info.</p>
<p>Now lets see how to create such a knob: </p><div class="fragment"><div class="line">CKnob* knob = <span class="keyword">new</span> CKnob (r, 0, 0, background, handle, CPoint (0, 0));</div>
</div><!-- fragment --><p>As you can see there are some parameters set to zero. Ignore them for a moment. I will talk about it later. If you add this knob to the frame and test the interface you will see that if you press the mouse button over this control and move the mouse, the handle of the knob is also moving. Great, we have something to play with in the editor.</p>
<p>The complete example : </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> MyEditor::open (<span class="keywordtype">void</span>* ptr)</div>
<div class="line">{</div>
<div class="line">        CRect frameSize (0, 0, 300, 300);</div>
<div class="line">        frame = <span class="keyword">new</span> CFrame (frameSize, ptr, <span class="keyword">this</span>);</div>
<div class="line">        CBitmap* background = <span class="keyword">new</span> CBitmap (<span class="stringliteral">&quot;KnobBackground.png&quot;</span>);</div>
<div class="line">        CBitmap* handle = <span class="keyword">new</span> CBitmap (<span class="stringliteral">&quot;KnobHandle.png&quot;</span>);</div>
<div class="line">        CRect r (0, 0, background-&gt;getWidth (), background-&gt;getHeight ());</div>
<div class="line">        CKnob* knob = <span class="keyword">new</span> CKnob (r, 0, 0, background, handle, CPoint (0, 0));</div>
<div class="line">        background-&gt;forget ();</div>
<div class="line">        handle-&gt;forget ();</div>
<div class="line">        frame-&gt;addView (knob);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="controllistener"></a>
Getting notification of control changes</h1>
<p>So now we have a knob in our editor. We'd like to know when the user uses this control.</p>
<h2><a class="anchor" id="TheCControlListener"></a>
The CControlListener</h2>
<p>This is done with the <a class="el" href="class_c_control_listener.html">CControlListener</a> interface. Every control in <a class="el" href="namespace_v_s_t_g_u_i.html">VSTGUI</a> can have one listener. When the value of the control has changed the listener is notified.</p>
<p>First we need a <a class="el" href="class_c_control_listener.html">CControlListener</a>. The easiest way is to inherit our editor not only from AEffGUIEditor but also from <a class="el" href="class_c_control_listener.html">CControlListener</a> : </p><div class="fragment"><div class="line"><span class="keyword">class </span>MyEditor : <span class="keyword">public</span> AEffGUIEditor, <span class="keyword">public</span> <a class="code" href="class_c_control_listener.html">CControlListener</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">        MyEditor (<span class="keywordtype">void</span>* ptr) : AEffGUIEditor (ptr) {}</div>
<div class="line"></div>
<div class="line">        <span class="comment">// from AEffGUIEditor</span></div>
<div class="line">        <span class="keywordtype">bool</span> open (<span class="keywordtype">void</span>* ptr);</div>
<div class="line">        <span class="keywordtype">void</span> close ();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// from CControlListener</span></div>
<div class="line">        <span class="keywordtype">void</span> <a class="code" href="class_c_control_listener.html#a69954f14caa181ef23896525b020937e">valueChanged</a> (CControl* pControl);</div>
<div class="line">};</div>
</div><!-- fragment --><p>Now we can use our editor as the listener parameter in the CKnob constructor. </p><div class="fragment"><div class="line">CKnob* knob = <span class="keyword">new</span> CKnob (r, <span class="keyword">this</span>, 0, background, handle, CPoint (0, 0));</div>
</div><!-- fragment --><p>We only need to implement the valueChanged method and we know when the user twiddles our knob. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> MyEditor::valueChanged (CControl* pControl)</div>
<div class="line">{</div>
<div class="line">        <span class="comment">// pControl is our knob in this example</span></div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="ControlIdentification"></a>
Control identification</h2>
<p>With one control it's fairly easy to know which control was used by the user. If there are more controls in our editor, to know which control was used is done by the tag of the control. So if we add two knobs to the frame we gave them different tags : </p><div class="fragment"><div class="line">CKnob* knob1 = <span class="keyword">new</span> CKnob (r, <span class="keyword">this</span>, 0, background, handle, CPoint (0, 0));</div>
<div class="line">CKnob* knob2 = <span class="keyword">new</span> CKnob (r, <span class="keyword">this</span>, 1, background, handle, CPoint (0, 0));</div>
</div><!-- fragment --><p> Now in our valueChanged method we can differentiate between the controls : </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> MyEditor::valueChanged (CControl* pControl)</div>
<div class="line">{</div>
<div class="line">        <span class="keywordtype">long</span> tag = pControl-&gt;getTag ();</div>
<div class="line">        <span class="keywordflow">if</span> (tag == 0)</div>
<div class="line">        {</div>
<div class="line">                <span class="comment">// the first knob</span></div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tag == 1)</div>
<div class="line">        {</div>
<div class="line">                <span class="comment">// the second knob</span></div>
<div class="line">        }</div>
<div class="line">}</div>
</div><!-- fragment --><p>For a complete example have a look at the tutorial project included with <a class="el" href="namespace_v_s_t_g_u_i.html">VSTGUI</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jun 27 2016 16:32:07 for VSTGUI by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
